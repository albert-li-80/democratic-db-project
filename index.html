<html>
<head>
<script>
function showResult(str) {
  
  if (str.length==0) { 
    document.getElementById("livesearch").innerHTML="";
    document.getElementById("livesearch").style.border="0px";
    return;
  }
  
  if (window.XMLHttpRequest) {
    // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  } else {  // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  
  xmlhttp.onreadystatechange=function() {
    if (this.readyState==4 && this.status==200) {

    var parser = new DOMParser();
    var xmlDoc = parser.parseFromString(this.responseText,"text/xml");

    // loop over <document> nodes
    var chiAddressNodes = xmlDoc.getElementsByTagName("ChiPremisesAddress"); 
    var engAddressNodes = xmlDoc.getElementsByTagName("EngPremisesAddress"); 
    
    var chiAddressNodesLength = chiAddressNodes.length;
    
//    window.alert("chiAddressNodesLength" + chiAddressNodesLength);
//    console.log("chiAddressNodesLength" + chiAddressNodesLength);
    console.log(chiAddressNodes);
    var chiAddress = "";
    
    for (i = 0; i < chiAddressNodesLength; i++) {
        console.log("text Content: " + chiAddressNodes[i].textContent);
        
        var region = "";
        var chi_district = "";
        var chi_street = "";
        var building_name = "";
        var chi_estate = "";
        var chi_block = "";
        var chi_lot = "";
        var chi_village = "";
        
        if (chiAddressNodes[i].getElementsByTagName("Region")[0]!=null)
            region = chiAddressNodes[i].getElementsByTagName("Region")[0].textContent;
        
        if (chiAddressNodes[i].getElementsByTagName("ChiDistrict")[0]!=null)
            chi_district = chiAddressNodes[i].getElementsByTagName("ChiDistrict")[0].textContent;
        
        if (chiAddressNodes[i].getElementsByTagName("ChiStreet")[0]!=null)
            chi_street = chiAddressNodes[i].getElementsByTagName("ChiStreet")[0].textContent;

        if (chiAddressNodes[i].getElementsByTagName("ChiLot")[0]!=null)
            chi_lot = chiAddressNodes[i].getElementsByTagName("ChiLot")[0].textContent;

        if (chiAddressNodes[i].getElementsByTagName("ChiVillage")[0]!=null)
            chi_village = chiAddressNodes[i].getElementsByTagName("ChiVillage")[0].textContent;
        
        if (chiAddressNodes[i].getElementsByTagName("BuildingName")[0]!=null)
            building_name = chiAddressNodes[i].getElementsByTagName("BuildingName")[0].textContent;

        if (chiAddressNodes[i].getElementsByTagName("ChiEstate")[0]!=null)
            chi_estate = chiAddressNodes[i].getElementsByTagName("ChiEstate")[0].textContent;

        if (chiAddressNodes[i].getElementsByTagName("ChiBlock")[0]!=null)
            chi_block = chiAddressNodes[i].getElementsByTagName("ChiBlock")[0].textContent;

        console.log("Combined: " + region + chi_district + chi_street + chi_lot + chi_village + building_name + chi_estate + chi_block);
//        console.log(street_name);
//        console.log(building_no_from);   
        chiAddress = chiAddress + "<a href=\"https://docs.google.com/forms/d/e/1FAIpQLScRB0UoSc_dpH3bDnXKHAFoatnLO0vRQ7x0ldODTnigxpnWEg/viewform?usp=pp_url\">" + chiAddressNodes[i].textContent + "</a><br>"; 
    }  

//    console.log(chiAddress);
    
    document.getElementById("livesearch").innerHTML=chiAddress;
//    document.getElementById("livesearch").style.border="1px solid #A5ACB2";
    }
  }
  xmlhttp.open("GET","https://www.als.ogcio.gov.hk/lookup?q="+str,true);
  xmlhttp.send();
}

</script>
</head>
<body>

<form action="https://docs.google.com/forms/d/e/1FAIpQLScRB0UoSc_dpH3bDnXKHAFoatnLO0vRQ7x0ldODTnigxpnWEg/viewform?usp=pp_url&entry.2005620554&entry.1045781291&entry.1065046570&entry.1166974658&entry.839337160">
<input type="text" id="inputform" size="100" width="80%" height ="20" onkeyup="showResult(this.value)">
<div id="livesearch"></div>
</form>

</body>
</html>